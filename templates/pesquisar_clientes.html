{% extends 'base.html' %}

{% block title %}Pesquisar Clientes — Tudo Gráfica{% endblock %}
{% block page_title %}Clientes Cadastrados{% endblock %}

{% block content %}
<div class="search-container">
    <form method="get" action="{{ url_for('pesquisar_clientes') }}" class="search-form">
        <input type="search" name="q" placeholder="Buscar por nome, razão social, CPF ou CNPJ..." value="{{ query or '' }}" class="form-control">
        <button type="submit" class="btn-salvar btn-pesquisar">Pesquisar</button>
    </form>
    <a href="{{ url_for('cadastro_clientes') }}" class="btn-salvar btn-novo">
        <i class="fa-solid fa-plus"></i> Novo Cliente
    </a>
</div>

<div class="table-wrapper">
    <table class="results-table">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nome / Razão Social</th>
                <th>Telefone</th>
                <th>E-mail</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody>
            {% for cliente in clientes %}
            <tr>
                <td>{{ cliente.id }}</td>
                <td>{{ cliente.nome or cliente.razao_social }}</td>
                <td>{{ cliente.telefone }}</td>
                <td>{{ cliente.email or cliente.email_cnpj }}</td>
                <td class="action-buttons">
                    <a href="{{ url_for('editar_cliente', id=cliente.id) }}" title="Editar">
                        <i class="fa-solid fa-pencil"></i>
                    </a>
                    <form method="POST" action="{{ url_for('excluir_cliente', id=cliente.id) }}" style="display:inline;" onsubmit="return confirm('Tem certeza que deseja excluir este cliente? A ação não pode ser desfeita.');">
                        <button type="submit" class="btn-delete" title="Excluir">
                            <i class="fa-solid fa-trash"></i>
                        </button>
                    </form>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="5" style="text-align: center; padding: 2rem;">Nenhum cliente encontrado.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}